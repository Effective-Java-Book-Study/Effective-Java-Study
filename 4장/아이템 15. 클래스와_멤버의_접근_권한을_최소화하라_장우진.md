# 아이템 15. 클래스와 멤버의 접근 권한을 최소화하라

* 어설프게 설계된 컴포넌트와 잘 설계된 컴포넌트의 가장 큰 차이는 바로 클래스 내부 데이터와 내부 구현 정보를 외부 컴포넌트로부터 얼마나 잘 숨겼느냐이다.
* 잘 설계된 컴포넌트는 모든 내부 구현을 완벽히 숨겨 구현과 API를 깔끔하게 분리한다.
* 정보 은닉, 혹은 캡슐화(Encapsulation)라고 불리는 이 개념은 소프트웨어 설계의 근간이 되는 원리다.

### [ 정보 은닉의 장점 ]

* 시스템 개발 속도를 높인다. 여러 컴포넌트를 병렬로 개발할 수 있다.
* 시스템 관리 비용을 낮춘다. 각 컴포넌트를 더 빨리 파악하여 디버깅할 수 있고 다른 컴포넌트로 교체하는 부담도 줄어든다.
* 다른 컴포넌트에 영향을 주지 않고 해당 컴포넌트만 최적화 할 수 있도록 한다.
* 소프트웨어 재사용성을 높인다.
* 큰 시스템을 제작하는 난이도를 낮춘다.

### [ 자바의 접근 제한자 ]

* 자바는 4가지 종류의 접근 제한자를 제공한다.
* 접근 제한자의 종류
  * private : 모든 외부 호출을 막는다.
  * package-private(default) : 같은 패키지 안에서의 호출은 허용한다.
  * protected : 같은 패키지 안에서 호출은 허용한다. 단 패키지가 달라도 상속 관계의 호출은 허용한다.
  * public : 모든 외부 호출을 허용한다.
* private이 가장 많이 차단하고 public이 가장 많이 허용한다.

### [ 캡슐화(Encapsulation) ]

* 캡슐화는 데이터와 해당 데이터를 처리하는 메서드를 하나로 묶어서 외부에서의 접근을 제한하는 것을 말한다.
* 캡슐화를 통해 데이터의 직접적인 변경을 방지하거나 제한할 수 있다.

1. 데이터를 숨겨라.

* 객체에는 속성(데이터)과 기능(메서드)이 있다. 캡슐화에서 가장 필수로 숨겨야 하는 것은 속성이다.
* 객체 내부의 데이터를 외부에서 접근해 변경할 수 있다면 모든 로직을 무시하고 데이터를 변경할 수 있게 된다.
* 결국 캡슐화가 깨지는 것이 된다.

2. 기능을 숨겨라.

* 객체의 기능 중에서 외부에서 사용하지 않고 내부에서만 사용하는 기능들이 있다.
* 클라이언트가 이런 기능을 모두 알아야 한다면 너무 많은 것을 알아야 한다.
* 클라이언트 입장에서 필요한 기능만 외부에 노출하자. 나머지 기능은 모두 내부로 숨긴다.

→ 데이터는 모두 숨기고 기능은 꼭 필요한 기능만 노출하자.

### [ 길이가 0이 아닌 배열에 대해서는? ]

* 길이가 0이 아닌 배열의 경우 클래스에 public static final 배열 필드를 두거나 이 필드를 반환하는 접근자 메서드를 제공해선 안 된다.
* 해결책 1 : 컬렉션 유틸에서 제공하는 불변 메서드를 사용하면 된다.

```java
private static final Thing[] PRIVATE_VALUES = { ...}   // private으로 설정
public static final List<Thing> VALUES = Collections.unmodifiableList(Arrays.asList(PRIVATE_VALUES)) // 컬렉션 유틸을 사용하여 불변 리스트 반환
```

* 핵심 정리
  * 프로그램 요소의 접근성은 가능한 한 최소한으로 한다.
  * 꼭 필요한 것만 public API로 설계한다.
  * public 클래스는 상수용 public static final 필드 외에는 어떠한 public 필드도 가져선 안 된다.
  * public static final 필드가 참조하는 객체가 불변인지 확인하고 아니라면 위와 같은 컬렉션 유틸을 활용하는 방법도 고려한다.